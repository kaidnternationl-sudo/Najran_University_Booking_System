<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام حجز السكن الجامعي - جامعة نجران</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- رأس الصفحة -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-text">
                    <h1>جامعة نجران</h1>
                    <p>نظام حجز السكن الجامعي الذكي</p>
                </div>
            </div>
            <div class="header-actions">
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                    الوضع الليلي
                </button>
            </div>
        </div>
    </header>

    <!-- المحتوى الرئيسي -->
    <main class="main-content">
        <!-- قسم الترحيب -->
        <section class="hero-section card fade-in">
            <div class="hero-content">
                <h1 class="section-title">مرحباً بكم في نظام حجز السكن الجامعي</h1>
                <p class="lead">نظام ذكي ومتكامل لتقديم طلبات السكن الجامعي وفق معايير العدالة والشفافية</p>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number" id="totalStudents">0</span>
                        <span class="stat-label">إجمالي المسجلين</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="availableRooms">0</span>
                        <span class="stat-label">غرف متاحة</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">100%</span>
                        <span class="stat-label">نسبة الرضا</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">24/7</span>
                        <span class="stat-label">دعم فني</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم الإحصائيات -->
        <section class="stats-section card fade-in">
            <h2 class="section-title">إحصائيات النظام</h2>
            
            <div class="grid grid-3">
                <div class="chart-container">
                    <h3>التوزيع حسب الجنس</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="maleProgress" style="width: 60%"></div>
                    </div>
                    <div class="progress-stats">
                        <span>ذكور: <span id="maleCount">0</span></span>
                        <span>إناث: <span id="femaleCount">0</span></span>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3>معدل الإشغال</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="occupancyProgress" style="width: 75%"></div>
                    </div>
                    <div class="progress-stats">
                        <span>الإشغال: <span id="occupancyRate">0%</span></span>
                        <span>المتاحة: <span id="availableRate">0%</span></span>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3>المعدل التراكمي</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="gpaProgress" style="width: 85%"></div>
                    </div>
                    <div class="progress-stats">
                        <span>المتوسط: <span id="averageGPA">0.00</span></span>
                        <span>الأعلى: <span id="maxGPA">0.00</span></span>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم بدء التقديم -->
        <section class="cta-section card fade-in">
            <div class="cta-content">
                <h2 class="section-title">ابدأ عملية التقديم الآن</h2>
                <p>استكمل عملية التسجيل في 3 خطوات بسيطة:</p>
                
                <div class="steps-grid grid grid-3">
                    <div class="step">
                        <div class="step-icon">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <h3>التحقق من الهوية</h3>
                        <p>التأكد من هويتك عبر بوابة النفاذ الوطني</p>
                    </div>
                    
                    <div class="step">
                        <div class="step-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <h3>اختيار السكن</h3>
                        <p>اختر المبنى ونوع الغرفة المناسب لك</p>
                    </div>
                    
                    <div class="step">
                        <div class="step-icon">
                            <i class="fas fa-file-contract"></i>
                        </div>
                        <h3>تأكيد الحجز</h3>
                        <p>استلام رقم المرجع وتأكيد الحجز النهائي</p>
                    </div>
                </div>
                
                <div class="cta-buttons">
                    <a href="registration.html" class="btn btn-primary">
                        <i class="fas fa-play-circle"></i>
                        بدء التقديم
                    </a>
                    <a href="#instructions" class="btn btn-secondary">
                        <i class="fas fa-info-circle"></i>
                        تعليمات التقديم
                    </a>
                </div>
            </div>
        </section>

        <!-- قسم التعليمات -->
        <section id="instructions" class="instructions-section card fade-in">
            <h2 class="section-title">تعليمات وشروط التقديم</h2>
            
            <div class="instructions-grid grid grid-2">
                <div class="instruction">
                    <h3><i class="fas fa-check-circle"></i> شروط الأهلية</h3>
                    <ul>
                        <li>أن يكون الطالب مسجلاً في جامعة نجران</li>
                        <li>تقديم الهوية الوطنية أو الإقامة سارية المفعول</li>
                        <li>دفع الرسوم الدراسية المستحقة</li>
                        <li>عدم وجود مخالفات سكنية سابقة</li>
                    </ul>
                </div>
                
                <div class="instruction">
                    <h3><i class="fas fa-file-alt"></i> المستندات المطلوبة</h3>
                    <ul>
                        <li>صورة الهوية الوطنية أو الإقامة</li>
                        <li>صورة من السجل الأكاديمي</li>
                        <li>صورة شخصية حديثة</li>
                        <li>شهادة عدم ممانعة (للطالبات)</li>
                    </ul>
                </div>
                
                <div class="instruction">
                    <h3><i class="fas fa-calendar-alt"></i> مواعيد هامة</h3>
                    <ul>
                        <li>بداية التقديم: 1 سبتمبر 2024</li>
                        <li>نهاية التقديم: 30 سبتمبر 2024</li>
                        <li>إعلان النتائج: 5 أكتوبر 2024</li>
                        <li>بداية السكن: 10 أكتوبر 2024</li>
                    </ul>
                </div>
                
                <div class="instruction">
                    <h3><i class="fas fa-hand-holding-usd"></i> الرسوم والإعفاءات</h3>
                    <ul>
                        <li>الغرفة القياسية: 4,000 ريال/فصل</li>
                        <li>الغرفة المتميزة: 6,000 ريال/فصل</li>
                        <li>الإعفاء للمتفوقين: 50% للمعدل فوق 4.5</li>
                        <li>خصم الأخوة: 20% للطلاب الأشقاء</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <!-- تذييل الصفحة -->
    <footer class="footer">
        <div class="footer-content">
            <p>جميع الحقوق محفوظة © جامعة نجران 2024</p>
            <p>هذا النظام مطابق لمعايير المركز الوطني للأمن السيبراني</p>
            
            <div class="footer-links">
                <a href="#"><i class="fas fa-shield-alt"></i> سياسة الخصوصية</a>
                <a href="#"><i class="fas fa-file-contract"></i> الشروط والأحكام</a>
                <a href="#"><i class="fas fa-question-circle"></i> الأسئلة الشائعة</a>
                <a href="#"><i class="fas fa-phone-alt"></i> الدعم الفني</a>
            </div>
            
            <div class="compliance-badges">
                <span class="badge">
                    <i class="fas fa-lock"></i> آمن ومشفر
                </span>
                <span class="badge">
                    <i class="fas fa-mobile-alt"></i> متوافق مع الجوال
                </span>
                <span class="badge">
                    <i class="fas fa-university"></i> معتمد من الجامعة
                </span>
            </div>
        </div>
    </footer>

    <!-- الروابط للصفحات الإدارية (مخفية) -->
    <div style="display: none;">
        <a href="admin-login.html">الدخول الإداري</a>
        <a href="admin-vault.html">الخزنة</a>
    </div>

    <script src="js/vault.js"></script>
    <script>
        // تهيئة النظام
        document.addEventListener('DOMContentLoaded', function() {
            // تبديل الوضع الليلي
            const themeToggle = document.getElementById('themeToggle');
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                const icon = this.querySelector('i');
                if (document.body.classList.contains('dark-mode')) {
                    icon.className = 'fas fa-sun';
                    this.innerHTML = '<i class="fas fa-sun"></i> الوضع النهاري';
                } else {
                    icon.className = 'fas fa-moon';
                    this.innerHTML = '<i class="fas fa-moon"></i> الوضع الليلي';
                }
            });

            // تحديث الإحصائيات
            updateStatistics();
            
            // تحديث الإحصائيات كل 10 ثوانٍ
            setInterval(updateStatistics, 10000);
        });

        // دالة تحديث الإحصائيات
        function updateStatistics() {
            const stats = studentVault.getStatistics();
            const students = studentVault.getStudents();
            
            // تحديث الأرقام الرئيسية
            document.getElementById('totalStudents').textContent = stats.total;
            document.getElementById('availableRooms').textContent = stats.available;
            
            // تحديث توزيع الجنس
            document.getElementById('maleCount').textContent = stats.genderStats['ذكر'] || 0;
            document.getElementById('femaleCount').textContent = stats.genderStats['أنثى'] || 0;
            
            const malePercent = stats.total > 0 ? Math.round((stats.genderStats['ذكر'] || 0) / stats.total * 100) : 0;
            document.getElementById('maleProgress').style.width = malePercent + '%';
            
            // تحديث معدل الإشغال
            const occupancyPercent = Math.round((stats.total / stats.capacity) * 100);
            document.getElementById('occupancyProgress').style.width = occupancyPercent + '%';
            document.getElementById('occupancyRate').textContent = occupancyPercent + '%';
            document.getElementById('availableRate').textContent = (100 - occupancyPercent) + '%';
            
            // تحديث المعدل التراكمي
            document.getElementById('averageGPA').textContent = stats.averageGPA;
            
            // حساب أعلى معدل
            if (students.length > 0) {
                const maxGPA = Math.max(...students.map(s => parseFloat(s.gpa)));
                document.getElementById('maxGPA').textContent = maxGPA.toFixed(2);
                document.getElementById('gpaProgress').style.width = Math.round((maxGPA / 5) * 100) + '%';
            }
        }
    </script>
</body>
</html>
