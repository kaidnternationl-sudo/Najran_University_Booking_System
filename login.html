<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>التسجيل عبر النفاذ الوطني - جامعة نجران</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.body.classList.add('dark-mode');
        }
    </script>

    <!-- الهيدر المبسط -->
    <header class="simple-header">
        <div class="header-content">
            <img src="assets/images/university-logo.png" alt="شعار جامعة نجران" class="logo">
            <h1>بوابة التحقق والتسجيل</h1>
            <p>الرجاء إدخال بياناتك الشخصية والأكاديمية بدقة</p>
        </div>
    </header>

    <!-- نموذج التسجيل الديناميكي -->
    <main class="registration-container">
        <div class="container">
            <div class="registration-card">
                <div class="form-header">
                    <h2><i class="icon-user-check"></i> نموذج التسجيل في السكن الجامعي</h2>
                    <p class="form-subtitle">جميع الحقول مطلوبة *</p>
                </div>
                
                <form id="registrationForm" class="university-form">
                    <!-- قسم البيانات الشخصية -->
                    <fieldset class="form-section">
                        <legend><i class="icon-id"></i> البيانات الشخصية</legend>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="fullName">
                                    <i class="icon-user"></i> الاسم الرباعي
                                    <span class="required">*</span>
                                </label>
                                <input type="text" 
                                       id="fullName" 
                                       name="fullName" 
                                       required 
                                       pattern="[\u0600-\u06FF\s]{10,}"
                                       title="الرجاء إدخال الاسم الرباعي باللغة العربية (10 أحرف على الأقل)"
                                       placeholder="أحمد محمد عبدالله العتيبي"
                                       class="form-control">
                                <small class="form-text">كما هو مدون في الهوية الوطنية</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="nationalId">
                                    <i class="icon-shield"></i> رقم النفاذ الوطني
                                    <span class="required">*</span>
                                </label>
                                <input type="text" 
                                       id="nationalId" 
                                       name="nationalId" 
                                       required 
                                       pattern="[0-9]{10}"
                                       maxlength="10"
                                       title="10 أرقام فقط"
                                       placeholder="10XXXXXXXX"
                                       class="form-control">
                                <small class="form-text">سيتم التحقق منه مع بوابة النفاذ الوطني</small>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="phone">
                                    <i class="icon-phone"></i> رقم الهاتف
                                    <span class="required">*</span>
                                </label>
                                <input type="tel" 
                                       id="phone" 
                                       name="phone" 
                                       required 
                                       pattern="05[0-9]{8}"
                                       maxlength="10"
                                       title="يجب أن يبدأ بـ 05 ويتكون من 10 أرقام"
                                       placeholder="05XXXXXXXX"
                                       class="form-control">
                            </div>
                            
                            <div class="form-group">
                                <label for="email">
                                    <i class="icon-email"></i> البريد الإلكتروني
                                    <span class="required">*</span>
                                </label>
                                <input type="email" 
                                       id="email" 
                                       name="email" 
                                       required 
                                       pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"
                                       placeholder="example@nu.edu.sa"
                                       class="form-control">
                                <small class="form-text">يفضل استخدام البريد الجامعي</small>
                            </div>
                        </div>
                    </fieldset>
                    
                    <!-- قسم البيانات الأكاديمية -->
                    <fieldset class="form-section">
                        <legend><i class="icon-graduation"></i> البيانات الأكاديمية</legend>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="gender">
                                    <i class="icon-gender"></i> الجنس
                                    <span class="required">*</span>
                                </label>
                                <select id="gender" name="gender" required class="form-control">
                                    <option value="">اختر الجنس</option>
                                    <option value="male">ذكر</option>
                                    <option value="female">أنثى</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="province">
                                    <i class="icon-location"></i> المحافظة
                                    <span class="required">*</span>
                                </label>
                                <select id="province" name="province" required class="form-control">
                                    <option value="">اختر المحافظة</option>
                                    <option value="نجران">نجران</option>
                                    <option value="الرياض">الرياض</option>
                                    <option value="مكة المكرمة">مكة المكرمة</option>
                                    <option value="المدينة المنورة">المدينة المنورة</option>
                                    <option value="الشرقية">الشرقية</option>
                                    <option value="عسير">عسير</option>
                                    <option value="جازان">جازان</option>
                                    <option value="حائل">حائل</option>
                                    <option value="القصيم">القصيم</option>
                                    <option value="تبوك">تبوك</option>
                                    <option value="الجوف">الجوف</option>
                                    <option value="الباحة">الباحة</option>
                                    <option value="الحدود الشمالية">الحدود الشمالية</option>
                                </select>
                                <small class="form-text">لأغراض المفاضلة حسب المسافة</small>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="gpa">
                                    <i class="icon-star"></i> المعدل التراكمي
                                    <span class="required">*</span>
                                </label>
                                <input type="number" 
                                       id="gpa" 
                                       name="gpa" 
                                       required 
                                       min="0" 
                                       max="5" 
                                       step="0.01"
                                       placeholder="4.50"
                                       class="form-control">
                                <small class="form-text">من 5.00 (أهم معيار للمفاضلة)</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="specialization">
                                    <i class="icon-book"></i> التخصص والكلية
                                    <span class="required">*</span>
                                </label>
                                <select id="specialization" name="specialization" required class="form-control">
                                    <option value="">اختر التخصص</option>
                                    <option value="طب وجراحة">طب وجراحة</option>
                                    <option value="هندسة حاسب">هندسة حاسب</option>
                                    <option value="هندسة مدنية">هندسة مدنية</option>
                                    <option value="إدارة أعمال">إدارة أعمال</option>
                                    <option value="محاسبة">محاسبة</option>
                                    <option value="قانون">قانون</option>
                                    <option value="تربية خاصة">تربية خاصة</option>
                                    <option value="علوم الحاسب">علوم الحاسب</option>
                                    <option value="صيدلة">صيدلة</option>
                                    <option value="تمريض">تمريض</option>
                                </select>
                            </div>
                        </div>
                    </fieldset>
                    
                    <!-- قسم الموافقات -->
                    <div class="form-section consent-section">
                        <div class="form-check">
                            <input type="checkbox" id="consent" name="consent" required>
                            <label for="consent">
                                أوافق على أن جميع البيانات المدخلة صحيحة ومطابقة للواقع، وأعطي الإذن للجامعة بالتحقق منها عبر قنواتها الرسمية.
                            </label>
                        </div>
                        
                        <div class="form-check">
                            <input type="checkbox" id="terms" name="terms" required>
                            <label for="terms">
                                أوافق على الشروط والأحكام الخاصة بحجز السكن الجامعي كما هي منشورة على الموقع الرسمي للجامعة.
                            </label>
                        </div>
                    </div>
                    
                    <!-- أزرار الإرسال -->
                    <div class="form-actions">
                        <button type="submit" class="btn-primary btn-large">
                            <i class="icon-send"></i> تأكيد البيانات والمتابعة
                        </button>
                        <a href="index.html" class="btn-secondary">إلغاء والعودة للرئيسية</a>
                    </div>
                    
                    <!-- شعار الأمان -->
                    <div class="security-notice">
                        <img src="assets/images/ncsc.png" alt="شعار NCSC" class="ncsc-logo">
                        <p>جميع بياناتك محمية ومشفرة وفق أعلى معايير الأمن السيبراني</p>
                    </div>
                </form>
            </div>
            
            <!-- معلومات إرشادية -->
            <div class="info-sidebar">
                <div class="info-card">
                    <h3><i class="icon-info"></i> معلومات مهمة</h3>
                    <ul>
                        <li>سيتم المفاضلة بين الطلاب بناءً على المعدل التراكمي والمسافة</li>
                        <li>الأعلى معدلاً والأبعد مسافة لهم الأولوية في الحجز</li>
                        <li>يمكنك تعديل البيانات قبل الضغط على تأكيد</li>
                        <li>سيصلك رسالة تأكيد على رقم الجوال والبريد الإلكتروني</li>
                    </ul>
                </div>
                
                <div class="info-card">
                    <h3><i class="icon-clock"></i> مهلة التقديم</h3>
                    <div class="deadline-counter">
                        <div class="counter-item">
                            <span id="days">15</span>
                            <small>أيام</small>
                        </div>
                        <div class="counter-item">
                            <span id="hours">23</span>
                            <small>ساعات</small>
                        </div>
                        <div class="counter-item">
                            <span id="minutes">45</span>
                            <small>دقائق</small>
                        </div>
                    </div>
                    <p>ينتهي التقديم في: ١٤٤٥/٠٦/١٥ هـ</p>
                </div>
            </div>
        </div>
    </main>

    <!-- الفوتر المبسط -->
    <footer class="simple-footer">
        <p>© 2024 نظام حجز السكن الجامعي - جامعة نجران. جميع الحقوق محفوظة.</p>
        <p>رقم الدعم الفني: 0175432100 | البريد: housing@nu.edu.sa</p>
    </footer>

    <script src="js/auth.js"></script>
    <script src="js/form-handler.js"></script>
    <script>
        // تهيئة نموذج التسجيل
        document.addEventListener('DOMContentLoaded', function() {
            const formHandler = new FormHandler();
            
            // عدّ تنازلي للمهلة
            function updateDeadlineCounter() {
                const deadline = new Date('2024-06-30T23:59:59');
                const now = new Date();
                const diff = deadline - now;
                
                if (diff > 0) {
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    
                    document.getElementById('days').textContent = days;
                    document.getElementById('hours').textContent = hours;
                    document.getElementById('minutes').textContent = minutes;
                }
            }
            
            updateDeadlineCounter();
            setInterval(updateDeadlineCounter, 60000);
        });
    </script>
</body>
</html>
