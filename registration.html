<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชุณุฌูู ุทูุจ ุงูุณูู - ุฌุงูุนุฉ ูุฌุฑุงู</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <header class="university-header">
        <div class="header-content">
            <h1>ูููุฐุฌ ุชุณุฌูู ุทูุจ ุงูุณูู</h1>
            <p>ุงููุฃ ุฌููุน ุงูุญููู ุงููุทููุจุฉ ุจุฏูุฉ</p>
        </div>
    </header>

    <main class="container">
        <div class="registration-container">
            <div class="form-card">
                <h2>๐ ุจูุงูุงุช ุงูุทุงูุจ</h2>
                
                <form id="studentRegistrationForm">
                    <div class="form-group">
                        <label for="fullName">ุงูุงุณู ุงูุฑุจุงุนู *</label>
                        <input type="text" id="fullName" required 
                               placeholder="ุฃุญูุฏ ูุญูุฏ ุนุจุฏุงููู ุงูุนุชูุจู">
                    </div>

                    <div class="form-group">
                        <label for="nationalId">ุฑูู ุงููููุฉ ุงููุทููุฉ *</label>
                        <input type="text" id="nationalId" required 
                               pattern="[0-9]{10}" maxlength="10"
                               placeholder="10XXXXXXXX">
                    </div>

                    <div class="form-group">
                        <label for="phone">ุฑูู ุงูุฌูุงู *</label>
                        <input type="tel" id="phone" required 
                               pattern="05[0-9]{8}" maxlength="10"
                               placeholder="05XXXXXXXX">
                    </div>

                    <div class="form-group">
                        <label for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู *</label>
                        <input type="email" id="email" required 
                               placeholder="example@nu.edu.sa">
                    </div>

                    <div class="form-group">
                        <label for="gpa">ุงููุนุฏู ุงูุชุฑุงููู *</label>
                        <input type="number" id="gpa" required 
                               min="0" max="5" step="0.01"
                               placeholder="4.50">
                    </div>

                    <div class="form-group">
                        <label for="province">ุงููุญุงูุธุฉ *</label>
                        <select id="province" required>
                            <option value="">ุงุฎุชุฑ ุงููุญุงูุธุฉ</option>
                            <option value="ูุฌุฑุงู">ูุฌุฑุงู</option>
                            <option value="ุงูุฑูุงุถ">ุงูุฑูุงุถ</option>
                            <option value="ููุฉ ุงูููุฑูุฉ">ููุฉ ุงูููุฑูุฉ</option>
                            <option value="ุงููุฏููุฉ ุงููููุฑุฉ">ุงููุฏููุฉ ุงููููุฑุฉ</option>
                            <option value="ุงูุดุฑููุฉ">ุงูุดุฑููุฉ</option>
                            <option value="ุนุณูุฑ">ุนุณูุฑ</option>
                            <option value="ุฌุงุฒุงู">ุฌุงุฒุงู</option>
                            <option value="ุญุงุฆู">ุญุงุฆู</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="specialization">ุงูุชุฎุตุต *</label>
                        <input type="text" id="specialization" required 
                               placeholder="ููุฏุณุฉ ุญุงุณุจ">
                    </div>

                    <div class="form-group">
                        <label for="gender">ุงูุฌูุณ *</label>
                        <select id="gender" required>
                            <option value="">ุงุฎุชุฑ ุงูุฌูุณ</option>
                            <option value="ุฐูุฑ">ุฐูุฑ</option>
                            <option value="ุฃูุซู">ุฃูุซู</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-primary btn-large">
                            โ ุชุฃููุฏ ุงูุชุณุฌูู
                        </button>
                        <a href="index.html" class="btn-secondary">ุฅูุบุงุก</a>
                    </div>
                </form>
            </div>

            <div class="info-sidebar">
                <div class="info-card">
                    <h3>โ๏ธ ููุงุญุธุงุช ูุงูุฉ</h3>
                    <ul>
                        <li>ุงููุธุงู ูุญุชูุธ ุจู 50 ุทูุจุงู ููุท (ุงูุฃุญุฏุซ ูุญู ูุญู ุงูุฃูุฏู)</li>
                        <li>ุณูุชู ุงูููุงุถูุฉ ุจูู ุงูุทูุงุจ ุญุณุจ ุงููุนุฏู ูุงููุณุงูุฉ</li>
                        <li>ุฌููุน ุงูุจูุงูุงุช ุงูููุฏูุฉ ุณุชุญูุธ ูู ุงูุฎุฒูุฉ ุงูุฅุฏุงุฑูุฉ</li>
                        <li>ูุง ูููู ุชุนุฏูู ุงูุจูุงูุงุช ุจุนุฏ ุงูุชุณุฌูู</li>
                    </ul>
                </div>

                <div class="counter-card">
                    <h3>๐ ุนุฏุฏ ุงูุทูุจุงุช ุงูุญุงูู</h3>
                    <div class="counter-number" id="currentRequests">0</div>
                    <div class="counter-max">/ 50</div>
                    <div class="counter-bar">
                        <div class="counter-fill" id="counterFill"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <p>ยฉ 2024 ุฌุงูุนุฉ ูุฌุฑุงู - ูุธุงู ุงูุณูู ุงูุฌุงูุนู</p>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/vault.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('studentRegistrationForm');
            const counter = document.getElementById('currentRequests');
            const fill = document.getElementById('counterFill');
            
            // ุชุญุฏูุซ ุงูุนุฏุงุฏ ุนูุฏ ุงูุชุญููู
            updateCounter();
            
            function updateCounter() {
                const vault = new StudentVault();
                const count = vault.getApplicationsCount();
                counter.textContent = count;
                const percentage = (count / 50) * 100;
                fill.style.width = percentage + '%';
                
                if (count >= 50) {
                    fill.style.backgroundColor = '#dc3545';
                    document.querySelector('.counter-card').classList.add('full');
                } else if (count >= 40) {
                    fill.style.backgroundColor = '#ffc107';
                    document.querySelector('.counter-card').classList.add('warning');
                }
            }
            
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // ุฌูุน ุงูุจูุงูุงุช
                const studentData = {
                    id: Date.now(),
                    fullName: document.getElementById('fullName').value,
                    nationalId: document.getElementById('nationalId').value,
                    phone: document.getElementById('phone').value,
                    email: document.getElementById('email').value,
                    gpa: parseFloat(document.getElementById('gpa').value),
                    province: document.getElementById('province').value,
                    specialization: document.getElementById('specialization').value,
                    gender: document.getElementById('gender').value,
                    registrationDate: new Date().toISOString(),
                    status: 'pending'
                };
                
                // ุงูุชุญูู ูู ุงูุจูุงูุงุช
                if (!validateData(studentData)) {
                    alert('ุงูุฑุฌุงุก ุชุนุจุฆุฉ ุฌููุน ุงูุญููู ุจุดูู ุตุญูุญ');
                    return;
                }
                
                // ุญูุธ ูู ุงูุฎุฒูุฉ
                const vault = new StudentVault();
                const result = vault.addApplication(studentData);
                
                if (result.success) {
                    // ุชุฎุฒูู ูุคูุช ููุนุฑุถ
                    localStorage.setItem('lastRegisteredStudent', JSON.stringify(studentData));
                    
                    // ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุงููุฌุงุญ
                    window.location.href = 'success.html';
                } else {
                    alert(result.message);
                }
            });
            
            function validateData(data) {
                if (!data.fullName || data.fullName.length < 10) return false;
                if (!/^[0-9]{10}$/.test(data.nationalId)) return false;
                if (!/^05[0-9]{8}$/.test(data.phone)) return false;
                if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(data.email)) return false;
                if (isNaN(data.gpa) || data.gpa < 0 || data.gpa > 5) return false;
                if (!data.province || !data.specialization || !data.gender) return false;
                return true;
            }
        });
    </script>
</body>
</html>
